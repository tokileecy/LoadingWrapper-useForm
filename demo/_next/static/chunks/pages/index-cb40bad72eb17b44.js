(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8522)}])},8522:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r,i,a=t(5893),s=t(9008),l=t.n(s);let c={laptop:1024,desktop:1440};window.matchMedia("(min-width: ".concat(c.laptop,"px)")),window.matchMedia("(min-width: ".concat(c.desktop,"px)"));let o={laptop:"@media (min-width: ".concat(c.laptop,"px)"),desktop:"@media (min-width: ".concat(c.desktop,"px)")};var d=t(8417),u=t(7906),h=t(444);function p(e,n){if(void 0===e.inserted[n.name])return e.insert("",n,e.sheet,!0)}function m(e,n,t){var r=[],i=(0,h.fp)(e,r,t);return r.length<2?t:i+n(r)}var f=function e(n){for(var t="",r=0;r<n.length;r++){var i=n[r];if(null!=i){var a=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))a=e(i);else for(var s in a="",i)i[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=i}a&&(t&&(t+=" "),t+=a)}}return t},x=((r=(0,d.Z)({key:"css"})).sheet.speedy=function(e){this.isSpeedy=e},r.compat=!0,{css:i=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,u.O)(n,r.registered,void 0);return(0,h.My)(r,i,!1),r.key+"-"+i.name},cx:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return m(r.registered,i,f(n))},injectGlobal:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,u.O)(n,r.registered);p(r,i)},keyframes:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,u.O)(n,r.registered),a="animation-"+i.name;return p(r,{name:i.name,styles:"@keyframes "+a+"{"+i.styles+"}"}),a},hydrate:function(e){e.forEach(function(e){r.inserted[e]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:h.fp.bind(null,r.registered),merge:m.bind(null,r.registered,i)}),g=(x.flush,x.hydrate,x.cx,x.merge,x.getRegisteredStyles,x.injectGlobal,x.keyframes,x.css);x.sheet,x.cache;let j=g({padding:"0 2rem"}),v=g({minHeight:"100vh",padding:"4rem 0",flex:1,display:"flex",flexDirection:"column",alignItems:"center",[o.laptop]:{maxWidth:"900px",margin:"0 auto"},[o.desktop]:{maxWidth:"1280px",margin:"0 auto"}}),y=g({margin:0,marginBottom:"2rem",fontSize:"1.75rem",lineHeight:1.15,textAlign:"center",[o.laptop]:{fontSize:"2rem"},[o.desktop]:{fontSize:"3.5rem"}}),w=g({display:"flex",flexDirection:"column",gap:"2rem",width:"100%"});var k=t(7294);function b(e){let{loadData:n,renderData:t}=e,[r,i]=(0,k.useState)(),[s,l]=(0,k.useState)(!1);(0,k.useEffect)(()=>{let e=async()=>{l(!0),i(await n()),l(!1)};e()},[n]);let c=(0,k.useMemo)(()=>void 0===r?"":t(r),[r,t]);return(0,a.jsx)("div",{"data-testid":"loading-wrapper",children:s?"Loading~":c})}function S(){return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Task 1"}),(0,a.jsx)("p",{children:"用typescript設計一個 react component LoadingWrapper"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"可以傳入一個 Promise operation (通常是 api call)"}),(0,a.jsx)("li",{children:"如果 promise 正在執行時，顯示 loading effect"}),(0,a.jsx)("li",{children:"如果 promise 完成了，把結果傳給 renderData 把結果顯示出來"})]}),(0,a.jsx)("h3",{children:"(a). String Case"}),(0,a.jsx)(b,{loadData:async()=>new Promise(e=>{setTimeout(()=>{e("String Case")},500)}),renderData:e=>(0,a.jsx)("div",{children:"string: ".concat(e)})}),(0,a.jsx)("h3",{children:"(b). Number Case"}),(0,a.jsx)(b,{loadData:async()=>new Promise(e=>{setTimeout(()=>{e(1234)},500)}),renderData:e=>(0,a.jsx)("div",{children:"number: ".concat(e)})})]})}let N=e=>Object.keys(e).reduce((e,n)=>(e[n]={error:""},e),{}),_={account:e=>e.length>8,pwd:e=>e.length>12};function C(){let[e,n,t]=function(e,n){let[t,r]=(0,k.useState)({...e}),[i,a]=(0,k.useState)(N(e)),s=(0,k.useMemo)(()=>Object.keys(e).reduce((e,n)=>(e[n]=e=>{r(t=>({...t,[n]:e.target.value}))},e),{}),[]),l=(0,k.useCallback)(()=>{let r=!0,i=Object.keys(e).reduce((e,i)=>(n[i](t[i])||(r=!1,e[i]={error:"something went wrong"}),e),N(e));return a(i),r},[t]);return[t,s,{...i,allFieldsValid:l}]}({account:"",pwd:""},_),r=async()=>{t.allFieldsValid()&&console.log("send data: ",e)};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Task 2"}),(0,a.jsx)("p",{children:"設計一個 react hook useForm"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"傳入一個初始的 data model"}),(0,a.jsx)("li",{children:"傳入針對各 data model 欄位的驗證邏輯"}),(0,a.jsxs)("li",{children:["回傳",(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"被處理好的 data model"}),(0,a.jsx)("li",{children:"各欄位的 setter，用於 onChange"}),(0,a.jsx)("li",{children:"各欄位驗證成功/失敗"})]})]})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r()},children:[(0,a.jsx)("label",{children:"Account"}),(0,a.jsx)("input",{type:"text",value:e.account,onChange:n.account}),(0,a.jsx)("div",{className:"invalid",children:t.account.error}),(0,a.jsx)("label",{children:"Password"}),(0,a.jsx)("input",{type:"password",value:e.pwd,onChange:n.pwd}),(0,a.jsx)("div",{className:"invalid",children:t.pwd.error}),(0,a.jsx)("button",{type:"submit",children:"submit"})]})]})}var A=function(){return(0,a.jsxs)("div",{className:j,children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"loading-wrapper-use-form"}),(0,a.jsx)("meta",{name:"description",content:"loading-wrapper-use-form"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("main",{className:v,children:[(0,a.jsx)("h1",{className:y,children:"loading-wrapper-use-form"}),(0,a.jsxs)("div",{className:w,children:[(0,a.jsx)(S,{}),(0,a.jsx)(C,{})]})]})]})}},9008:function(e,n,t){e.exports=t(2636)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);